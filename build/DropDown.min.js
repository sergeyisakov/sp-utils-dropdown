define(function(a){var b,c,d,e,f,g,h;return b=a("backbone"),g=a("backbone-mixin"),a("epoxy"),h=g(b.Epoxy.View),f=b.Epoxy.Model.extend({defaults:{text:"",value:"",active:!1}}),c=b.Collection.extend({model:f}),d=h.extend({className:"dropdown_item",tagName:"li",bindings:{":el":"text: text, classes: {active: active}"},events:{click:"onClick"},onClick:function(){return this.model.set({active:!0})}}),e=h.extend({className:"dropdown_list",itemView:d,templateFunc:function(){return"<button class=dropdown-list-button type='button' data-js-button></button> <ul class=dropdown-list-menu data-js-menu></ul>"},ui:{menu:"[data-js-menu]",button:"[data-js-button]"},bindings:{"@ui.menu":"collection: $collection"},events:{click:"onClick"},initialize:function(){return this.collection=new c,this.listenTo(this.collection,"change:active",this.onChangeCollectionActive),this.currentActiveModel=null},bindToInput:function(a){this.$input=a},setButtonText:function(a){return this.ui.button.text(a)},setData:function(a){return this.collection.remove(this.collection.models),this.collection.add(a)},onClick:function(){return this.$el.toggleClass("open")},onChangeCollectionActive:function(a,b){var c;if(b)return null!=(c=this.currentActiveModel)&&c.set({active:!1}),this.currentActiveModel=a,this.$input.val(a.get("value")),this.$input.trigger("change"),this.setButtonText(a.get("text"))}})});