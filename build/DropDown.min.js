(function(){var a;a=function(a,b){var c,d,e,f,g;return g=b(a.View),f=a.Model.extend({defaults:{text:"",value:"",active:!1}}),c=a.Collection.extend({model:f}),d=g.extend({className:"dropdown_item",tagName:"li",events:{click:"onClick"},initialize:function(){return this.listenTo(this.model,{"change:text":this.onTextChange,"change:active":this.onActiveChange}),this.updateText(),this.updateActive()},updateText:function(){return this.$el.text(this.model.get("text"))},updateActive:function(){return this.model.get("active")?this.$el.addClass("active"):this.$el.removeClass("active")},onTextChange:function(){return this.updateText()},onActiveChange:function(){return this.updateActive()},onClick:function(){return this.model.set({active:!0})}}),e=g.extend({className:"dropdown_list",itemView:d,templateFunc:function(){return"<button class=dropdown-list-button type='button' data-js-button></button> <ul class=dropdown-list-menu data-js-menu></ul>"},ui:{menu:"[data-js-menu]",button:"[data-js-button]"},events:{click:"onClick"},initialize:function(){return this.collection=new c,this.listenTo(this.collection,{"change:active":this.onChangeCollectionActive,add:this.onAddCollection,remove:this.onRemoveCollection}),this.currentActiveModel=null,this.views={}},bindToInput:function(a){this.$input=a},setButtonText:function(a){return this.ui.button.text(a)},setData:function(a){return this.collection.remove(this.collection.models),this.collection.add(a)},onClick:function(){return this.$el.toggleClass("open")},onAddCollection:function(a){var b;return this.views[a.cid]=b=new this.itemView({model:a}),this.ui.menu.append(b.$el)},onRemoveCollection:function(a){return this.views[a.cid].remove()},onChangeCollectionActive:function(a,b){var c;if(b)return null!=(c=this.currentActiveModel)&&c.set({active:!1}),this.currentActiveModel=a,this.$input.val(a.get("value")),this.$input.trigger("change"),this.setButtonText(a.get("text"))}}),e.version="0.0.3",e},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["backbone","backbone-mixin"],function(b,c){return a(b,c)}):window.DropDown=a(Backbone,MixinBackbone)}).call(this);